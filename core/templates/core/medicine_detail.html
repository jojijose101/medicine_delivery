{% extends "base.html" %}
{% block title %}{{ med.name }} - MediDelivery{% endblock %}

{% block content %}

<a class="btn btn-link" href="{% url 'core:home' %}">← Back to Medicines</a>

<div class="grid grid-2" style="margin-top:12px; align-items:start;">

    <!-- LEFT: Medicine info -->
    <div class="card">
        <div class="card-body">
            {% if med.image %}
            <img class="hero-img" src="{{ med.image.url }}" alt="{{ med.name }}" style="margin-bottom:14px;">
            {% endif %}
            <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap;">
                <div>
                    <h1 class="page-title" style="margin:0;">{{ med.name }}</h1>
                    <p class="muted" style="margin:6px 0 0; font-weight:800;">
                        Brand: {{ med.brand }}
                    </p>
                </div>

                {% if med.stock > 0 %}
                <span class="badge badge-success"><span class="dot"></span>In stock</span>
                {% else %}
                <span class="badge badge-danger"><span class="dot"></span>Out of stock</span>
                {% endif %}
            </div>

            <div class="grid grid-2" style="margin-top:16px;">
                <div class="card" style="box-shadow:none; border:1px solid rgba(226,232,240,.8);">
                    <div class="card-body" style="padding:14px;">
                        <div class="muted"
                            style="font-weight:800; font-size:12px; letter-spacing:.08em; text-transform:uppercase;">
                            Price</div>
                        <div style="font-size:22px; font-weight:900; margin-top:6px;">₹{{ med.price }}</div>
                    </div>
                </div>

                <div class="card" style="box-shadow:none; border:1px solid rgba(226,232,240,.8);">
                    <div class="card-body" style="padding:14px;">
                        <div class="muted"
                            style="font-weight:800; font-size:12px; letter-spacing:.08em; text-transform:uppercase;">
                            Stock</div>
                        <div style="font-size:22px; font-weight:900; margin-top:6px;">{{ med.stock }}</div>
                    </div>
                </div>
            </div>

            <div style="margin-top:14px;">
                <h3 class="card-title" style="margin:0 0 8px;">Description</h3>
                <p class="muted" style="margin:0; line-height:1.7;">
                    {{ med.description|default:"No description provided." }}
                </p>
            </div>

            <div style="margin-top:18px; display:flex; gap:10px; flex-wrap:wrap;">
                {% if med.stock > 0 %}
                <a class="btn btn-primary" href="{% url 'core:cart_add' med.id %}">Add to Cart</a>
                {% else %}
                <button class="btn btn-outline" disabled style="opacity:.6; cursor:not-allowed;">Out of Stock</button>
                {% endif %}

                <a class="btn btn-outline" href="{% url 'core:cart' %}">Go to Cart</a>
            </div>

            <div style="margin-top:14px; display:flex; gap:8px; flex-wrap:wrap;">
                <span class="badge"><span class="dot"></span>Verified medicine</span>
                <span class="badge"><span class="dot"></span>Secure payments</span>
                <span class="badge"><span class="dot"></span>Fast delivery</span>
            </div>
        </div>
    </div>

    <!-- RIGHT: Helpful info / tips -->
    <div class="card">
        <div class="card-body">
            <h3 class="card-title" style="margin-top:0;">Quick Notes</h3>
            <ul class="muted" style="margin:10px 0 0; line-height:1.9; padding-left:18px;">
                <li>Check dosage and expiry before use.</li>
                <li>Store medicines in a cool, dry place.</li>
                <li>If symptoms continue, consult a doctor.</li>
            </ul>

            <div class="card" style="margin-top:14px; box-shadow:none; border:1px solid rgba(226,232,240,.8);">
                <div class="card-body" style="padding:14px;">
                    <div class="muted" style="font-weight:900;">Need help?</div>
                    <p class="muted" style="margin:6px 0 0;">Use the order tracking in <b>My Orders</b> after checkout.
                    </p>
                    <a class="btn btn-outline btn-sm" href="{% url 'core:my_orders' %}">My Orders</a>
                </div>
            </div>

        </div>
    </div>

</div>

{% endblock %}